INSERT INTO TBLMVERSION (SERIALNO,VERSION,SETUPMODE,COMPONENT,EXECUTED_ON) VALUES (SEQ_TBLMVERSION.nextval,'6.6.2.0','upgrade-csm-to-6.6.2.0','AAASMX',CURRENT_TIMESTAMP);
commit;

UPDATE TBLMVERSION SET VERSION = '6.6.2';
UPDATE TBLMNETSERVERTYPE SET VERSION = '6.6.2';
UPDATE TBLMNETSERVERINSTANCE SET VERSION = '6.6.2';
UPDATE TBLNETSERVERCONFIGVERSION SET NETSERVERVERSION = '6.6.2';
commit;

ALTER TABLE TBLMNASPOLICY ADD (WIMAX VARCHAR2(8), GRACEPOLICY VARCHAR2(100), ANONYMOUSIDENTITY VARCHAR2(100));
commit;

ALTER TABLE TBLRADIUSCUSTOMER ADD (FRAMEDIPV4ADDRESS VARCHAR(255), FRAMEDIPV6PREFIX VARCHAR(255), FRAMEDPOOL VARCHAR(255));
commit;

INSERT INTO TBLSLOGICALNAMEVALUEPOOL (ID,NAME,VALUE) 
VALUES ('LNV0044', 'Reply Framed IPV4 Address','FRAMEDIPV4ADDRESS');

INSERT INTO TBLSLOGICALNAMEVALUEPOOL (ID,NAME,VALUE) 
VALUES ('LNV0045', 'Reply Framed IPV6 Prefix','FRAMEDIPV6PREFIX');

INSERT INTO TBLSLOGICALNAMEVALUEPOOL (ID,NAME,VALUE) 
VALUES ('LNV0046', 'Reply Framed Pool','FRAMEDPOOL');
commit;
 
INSERT INTO TBLSLOGICALNAMEDRIVERREL(DRIVERTYPEID, LOGICALNAMEID) VALUES (1,'LNV0045');
INSERT INTO TBLSLOGICALNAMEDRIVERREL(DRIVERTYPEID, LOGICALNAMEID) VALUES (7,'LNV0045');
INSERT INTO TBLSLOGICALNAMEDRIVERREL(DRIVERTYPEID, LOGICALNAMEID) VALUES (26,'LNV0045');
INSERT INTO TBLSLOGICALNAMEDRIVERREL(DRIVERTYPEID, LOGICALNAMEID) VALUES (14,'LNV0045');
INSERT INTO TBLSLOGICALNAMEDRIVERREL(DRIVERTYPEID, LOGICALNAMEID) VALUES (17,'LNV0045');
INSERT INTO TBLSLOGICALNAMEDRIVERREL(DRIVERTYPEID, LOGICALNAMEID) VALUES (27,'LNV0045');
INSERT INTO TBLSLOGICALNAMEDRIVERREL(DRIVERTYPEID, LOGICALNAMEID) VALUES (28,'LNV0045');
commit;

ALTER TABLE TBLMEAPPOLICY ADD (WIMAX VARCHAR2(8), GRACEPOLICY VARCHAR2(100), ANONYMOUSIDENTITY VARCHAR2(100));
COMMIT;

ALTER TABLE TBLMNASPOLICY ADD (SESSIONMANAGEMENT VARCHAR2(5) default 'false' NOT NULL);

ALTER TABLE TBLMCCPOLICY ADD (SESSIONMANAGEMENT VARCHAR2(5) default 'false' NOT NULL);

ALTER TABLE TBLMEAPPOLICY ADD (SESSIONMANAGEMENT VARCHAR2(5) default 'false' NOT NULL); 
COMMIT;

ALTER TABLE TBLMPEERPROFILE ADD (HAIPADDRESS VARCHAR2(100), DHCPIPADDRESS VARCHAR2(100));


CREATE SEQUENCE SEQ_MRADIUSPOLICYGROUP
    INCREMENT BY 1
    START WITH 1
    NOMAXVALUE
    NOMINVALUE
    NOCYCLE
    CACHE 20
    NOORDER;    

CREATE SEQUENCE SEQ_MDIAMETERPOLICYGROUP
    INCREMENT BY 1
    START WITH 1
    NOMAXVALUE
    NOMINVALUE
    NOCYCLE
    CACHE 20
    NOORDER; 
    
CREATE TABLE TBLMRADIUSPOLICYGROUP
(
  POLICYID    NUMBER(20) NOT NULL,
  POLICYNAME  VARCHAR(50) NOT NULL,
  EXPRESSION  VARCHAR(100),
  AUDIT_UID NUMBER(20,0),
  CONSTRAINT PK_MRADIUSPOLICYGROUP PRIMARY KEY (POLICYID),
  CONSTRAINT UK_MRADIUSPOLICYGROUP UNIQUE (POLICYNAME)
);

CREATE TABLE TBLMDIAMETERPOLICYGROUP
(
  POLICYID    NUMBER(20) NOT NULL,
  POLICYNAME  VARCHAR(50) NOT NULL,
  EXPRESSION  VARCHAR(100),
  AUDIT_UID NUMBER(20,0),
  CONSTRAINT PK_MDIAMETERPOLICYGROUP PRIMARY KEY (POLICYID),
  CONSTRAINT UK_MDIAMETERPOLICYGROUP UNIQUE (POLICYNAME)
);

COMMIT;

-- RADIUS POLICY GROUP ACL

--CREATE RADIUS POLICY GROUP
INSERT INTO TBLMBISMODULE (BUSINESSMODULEID,ALIAS,NAME,SYSTEMGENERATED,STATUS,BISMODULETYPEID,DESCRIPTION,FREEZEPROFILE)
VALUES ('BMO00048','RADIUS_POLICY_GROUP','Radius Policy Group','N','E','BTY00001','Radius Policy Group','E');	

INSERT INTO TBLTBISMODELMODULEREL (BUSINESSMODELID,BUSINESSMODULEID,STATUS) VALUES ('BM000001','BMO00048','E');

INSERT INTO TBLMSUBBISMODULE (SUBBUSINESSMODULEID,ALIAS,NAME,SYSTEMGENERATED,STATUS,SUBBISMODULETYPEID,DESCRIPTION,FREEZEPROFILE) 
VALUES ('SBM00112','CREATE_RADIUS_POLICY_GROUP','Create Radius Policy Group','N','E','STY00001','Create Radius Policy Group','E');

Insert into TBLTBISMODULESUBBISMODULEREL (BUSINESSMODULEID,SUBBUSINESSMODULEID,STATUS) values ('BMO00048','SBM00112','E');

Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00422','Create Radius Policy Group','CREATE_RADIUS_POLICY_GROUP','Create Radius Policy Group','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00422','SBM00112','E');

Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00422',1);

--SEARCH RADIUS POLICY GROUP
INSERT INTO TBLMSUBBISMODULE (SUBBUSINESSMODULEID,ALIAS,NAME,SYSTEMGENERATED,STATUS,SUBBISMODULETYPEID,DESCRIPTION,FREEZEPROFILE) 
VALUES ('SBM00113','SEARCH_RADIUS_POLICY_GROUP','Search Radius Policy Group','N','E','STY00001','Search Radius Policy Group','E');

Insert into TBLTBISMODULESUBBISMODULEREL (BUSINESSMODULEID,SUBBUSINESSMODULEID,STATUS) values ('BMO00048','SBM00113','E');

Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00423','Search Radius Policy Group','SEARCH_RADIUS_POLICY_GROUP','Search Radius Policy Group','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00423','SBM00113','E');

Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00423',1);

--UPDATE and DELETE RADIUS POLICY GROUP
Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00424','Update Radius Policy Group','UPDATE_RADIUS_POLICY_GROUP','Update Radius Policy Group','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00425','Delete Radius Policy Group','DELETE_RADIUS_POLICY_GROUP','Delete Radius Policy Group','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00426','View Radius Policy Group','VIEW_RADIUS_POLICY_GROUP','View Radius Policy Group','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00424','SBM00113','E');
Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00425','SBM00113','E');
Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00426','SBM00113','E');

Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00424',1);
Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00425',1);
Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00426',1);

COMMIT;

-- DIAMETER POLICY GROUP
-- CREATE DIAMETER POLICY GROUP
INSERT INTO TBLMBISMODULE (BUSINESSMODULEID,ALIAS,NAME,SYSTEMGENERATED,STATUS,BISMODULETYPEID,DESCRIPTION,FREEZEPROFILE)
VALUES ('BMO00049','DIAMETER_POLICY_GROUP','Diameter Policy Group','N','E','BTY00001','Diameter Policy Group','E');	

INSERT INTO TBLTBISMODELMODULEREL (BUSINESSMODELID,BUSINESSMODULEID,STATUS) VALUES ('BM000010','BMO00049','E');

INSERT INTO TBLMSUBBISMODULE (SUBBUSINESSMODULEID,ALIAS,NAME,SYSTEMGENERATED,STATUS,SUBBISMODULETYPEID,DESCRIPTION,FREEZEPROFILE) 
VALUES ('SBM00114','CREATE_DIAMETER_POLICY_GROUP','Create Diameter Policy Group','N','E','STY00001','Create Diameter Policy Group','E');

Insert into TBLTBISMODULESUBBISMODULEREL (BUSINESSMODULEID,SUBBUSINESSMODULEID,STATUS) values ('BMO00049','SBM00114','E');

Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00427','Create Diameter Policy Group','CREATE_DIAMETER_POLICY_GROUP','Create Diameter Policy Group','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00427','SBM00114','E');

Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00427',1);

-- SEARCH DIAMETER POLICY GROUP
INSERT INTO TBLMSUBBISMODULE (SUBBUSINESSMODULEID,ALIAS,NAME,SYSTEMGENERATED,STATUS,SUBBISMODULETYPEID,DESCRIPTION,FREEZEPROFILE) 
VALUES ('SBM00115','SEARCH_DIAMETER_POLICY_GROUP','Search Diameter Policy Group','N','E','STY00001','Search Diameter Policy Group','E');

Insert into TBLTBISMODULESUBBISMODULEREL (BUSINESSMODULEID,SUBBUSINESSMODULEID,STATUS) values ('BMO00049','SBM00115','E');

Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00428','Search Diameter Policy Group','SEARCH_DIAMETER_POLICY_GROUP','Search Diameter Policy Group','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00428','SBM00115','E');

Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00428',1);

--UPDATE and DELETE DIAMETER POLICY GROUP
Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00429','Update Diameter Policy Group','UPDATE_DIAMETER_POLICY_GROUP','Update Diameter Policy Group','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00430','Delete Diameter Policy Group','DELETE_DIAMETER_POLICY_GROUP','Delete Diameter Policy Group','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00431','View Diameter Policy Group','VIEW_DIAMETER_POLICY_GROUP','View Diameter Policy Group','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00429','SBM00115','E');
Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00430','SBM00115','E');
Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00431','SBM00115','E');

Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00429',1);
Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00430',1);
Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00431',1);

COMMIT;

INSERT INTO TBLSLOGICALNAMEVALUEPOOL (ID,NAME,VALUE)  VALUES ('LNV0047', 'Policy Group','Policy Group');

-- Added RADIUSPOLICYGROUP and DIAMETERPOLICYGROUP in TBLRADIUSCUSTOMER
ALTER TABLE TBLRADIUSCUSTOMER ADD (RADIUSPOLICYGROUP VARCHAR(255), DIAMETERPOLICYGROUP VARCHAR(255));
COMMIT;

update TBLTBISMODELMODULEREL set BUSINESSMODELID='BM000005',BUSINESSMODULEID='BMO00002' where BUSINESSMODELID='BM000001' and BUSINESSMODULEID='BMO00002';
COMMIT;

ALTER TABLE TBLMSMCONFIGINSTANCE ADD CONCURRENCYIDENTITYFIELD VARCHAR(30);

-- Added Fields in TBLMDIAMETERSESSIONDATA
ALTER TABLE TBLMDIAMETERSESSIONDATA ADD (APPLICATION_ID VARCHAR(30), PDP_TYPE VARCHAR(30),PEER_ID VARCHAR(30),CONCURRENCY_ID VARCHAR(30), SESSION_STATUS VARCHAR(30));
COMMIT;

-- Diameter Concurrency Module
CREATE SEQUENCE SEQ_MDIACONCURRENCYCONFIG
    INCREMENT BY 1
    START WITH 20
    NOMAXVALUE
    NOMINVALUE
    NOCYCLE
    CACHE 20
    NOORDER;
    
CREATE SEQUENCE SEQ_MDIACONFIELDMAPPINGS
    INCREMENT BY 1
    START WITH 20
    NOMAXVALUE
    NOMINVALUE
    NOCYCLE
    CACHE 20
    NOORDER;
   
CREATE TABLE TBLMDIACONCURRENCYCONFIG (
    DIACONCONFIGID NUMBER(20,0) NOT NULL,
    NAME VARCHAR2(64) NOT NULL,
    DESCRIPTION VARCHAR2(255),
	DATABASESID NUMERIC(20),
    TABLENAME VARCHAR2(30),
    STARTTIMEFIELD VARCHAR2(30),
    LASTUPDATETIMEFIELD VARCHAR2(30),
    DBFAILUREACTION VARCHAR2(30),
    SESSIONOVERRIDEACTION VARCHAR2(30),
	SESSIONOVERRIDEFIELDS VARCHAR2(300),
	AUDIT_UID NUMBER(20,0),
    CONSTRAINT PK_MDIACONCURRENCYCONFIG PRIMARY KEY (DIACONCONFIGID),
    CONSTRAINT FK1_MDIACONCURRENCYCONFIG FOREIGN KEY  (DATABASESID) REFERENCES TBLMDATABASEDS (DATABASEDSID)
);

CREATE TABLE TBLMDIACONFIELDMAPPINGS(
    DBFIELDMAPID NUMBER(20,0) NOT NULL,
    FIELD VARCHAR2(30),
    DBFIELDNAME VARCHAR2(64),
    REFERRINGATTR VARCHAR2(50),
    DATATYPE NUMBER(2,0),
    DEFAULTVALUE VARCHAR2(255),
    DIACONCONFIGID NUMBER(20,0),
	INCLUDEINASR VARCHAR2(5),
    CONSTRAINT pk_MDIACONFIELDMAPPINGS PRIMARY KEY (DBFIELDMAPID),
    CONSTRAINT fk1_MDIACONFIELDMAPPINGS FOREIGN KEY (DIACONCONFIGID) REFERENCES TBLMDIACONCURRENCYCONFIG (DIACONCONFIGID)
);

COMMIT;

-- Diameter Concurrency Module
INSERT INTO TBLMBISMODULE (BUSINESSMODULEID,ALIAS,NAME,SYSTEMGENERATED,STATUS,BISMODULETYPEID,DESCRIPTION,FREEZEPROFILE)
VALUES ('BMO00050','DIAMETER_CONCURRENCY','Diameter Concurrency','N','E','BTY00001','Diameter Concurrency','E');	

INSERT INTO TBLTBISMODELMODULEREL (BUSINESSMODELID,BUSINESSMODULEID,STATUS) VALUES ('BM000010','BMO00050','E');

INSERT INTO TBLMSUBBISMODULE (SUBBUSINESSMODULEID,ALIAS,NAME,SYSTEMGENERATED,STATUS,SUBBISMODULETYPEID,DESCRIPTION,FREEZEPROFILE) 
VALUES ('SBM00116','CREATE_DIAMETER_CONCURRENCY','Create Diameter Concurrency','N','E','STY00001','Create Diameter Concurrency','E');

Insert into TBLTBISMODULESUBBISMODULEREL (BUSINESSMODULEID,SUBBUSINESSMODULEID,STATUS) values ('BMO00050','SBM00116','E');

Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00432','Create Diameter Concurrency','CREATE_DIAMETER_CONCURRENCY','Create Diameter Concurrency','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00432','SBM00116','E');

Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00432',1);

-- SEARCH DIAMETER CONCURRENCY
INSERT INTO TBLMSUBBISMODULE (SUBBUSINESSMODULEID,ALIAS,NAME,SYSTEMGENERATED,STATUS,SUBBISMODULETYPEID,DESCRIPTION,FREEZEPROFILE) 
VALUES ('SBM00117','SEARCH_DIAMETER_CONCURRENCY','Search Diameter Concurrency','N','E','STY00001','Search Diameter Concurrency','E');

Insert into TBLTBISMODULESUBBISMODULEREL (BUSINESSMODULEID,SUBBUSINESSMODULEID,STATUS) values ('BMO00050','SBM00117','E');

Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00433','Search Diameter Concurrency','SEARCH_DIAMETER_CONCURRENCY','Search Diameter Concurrency','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00433','SBM00117','E');

Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00433',1);

--UPDATE and DELETE DIAMETER CONCURRENCY
Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00434','Update Diameter Concurrency','UPDATE_DIAMETER_CONCURRENCY','Update Diameter Concurrency','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00435','Delete Diameter Concurrency','DELETE_DIAMETER_CONCURRENCY','Delete Diameter Concurrency','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00436','View Diameter Concurrency','VIEW_DIAMETER_CONCURRENCY','View Diameter Concurrency','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00434','SBM00117','E');
Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00435','SBM00117','E');
Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00436','SBM00117','E');

Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00434',1);
Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00435',1);
Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00436',1);
COMMIT;

--Added Diameter Concurrency and Additional Concurrency in EAP Policy
ALTER TABLE TBLMEAPPOLICY ADD DIACONCONFIGID NUMERIC(20,0);
ALTER TABLE TBLMEAPPOLICY ADD CONSTRAINT FK2_MTBLMEAPPOLICY FOREIGN KEY (DIACONCONFIGID) REFERENCES TBLMDIACONCURRENCYCONFIG (DIACONCONFIGID);

ALTER TABLE TBLMEAPPOLICY ADD ADDIDIACONCONFIGID NUMERIC(20,0);
ALTER TABLE TBLMEAPPOLICY ADD CONSTRAINT FK3_MTBLMEAPPOLICY FOREIGN KEY (ADDIDIACONCONFIGID) REFERENCES TBLMDIACONCURRENCYCONFIG (DIACONCONFIGID);

--Added Diameter Concurrency and Additional Concurrency in NAS Policy
ALTER TABLE TBLMNASPOLICY ADD DIACONCONFIGID NUMERIC(20,0);
ALTER TABLE TBLMNASPOLICY ADD CONSTRAINT FK1_MNASAUTHPOLICY FOREIGN KEY (DIACONCONFIGID) REFERENCES TBLMDIACONCURRENCYCONFIG (DIACONCONFIGID);

ALTER TABLE TBLMNASPOLICY ADD ADDIDIACONCONFIGID NUMERIC(20,0);
ALTER TABLE TBLMNASPOLICY ADD CONSTRAINT FK2_MNASAUTHPOLICY FOREIGN KEY (ADDIDIACONCONFIGID) REFERENCES TBLMDIACONCURRENCYCONFIG (DIACONCONFIGID);
COMMIT;

--Rename SUBSCRIBERIDENTITY to SUBSCRIBER_ID
ALTER TABLE TBLMDIAMETERSESSIONDATA RENAME COLUMN SUBSCRIBERIDENTITY TO SUBSCRIBER_ID;
 
--Add SessionTimeout in EAP and NAs Policy
ALTER TABLE TBLMEAPPOLICY ADD DEFAULTSESSIONTIMEOUT NUMBER(10);
ALTER TABLE TBLMNASPOLICY ADD DEFAULTSESSIONTIMEOUT NUMBER(10);

--Add CONCURRENCYIDENTITY in TBLMDIACONCURRENCYCONFIG table
ALTER TABLE TBLMDIACONCURRENCYCONFIG ADD CONCURRENCYIDENTITY VARCHAR2(30);
ALTER TABLE TBLMDIAMETERSESSIONDATA ADD GROUPNAME VARCHAR2(60);
COMMIT;

--Add ADVANCEDCUIEXPRESSION into TBLMNASPOLICY
ALTER TABLE TBLMNASPOLICY ADD ADVANCEDCUIEXPRESSION VARCHAR2(100);

--Add CUI Parameters into TBLMEAPPOLICY
ALTER TABLE TBLMEAPPOLICY ADD (CUI VARCHAR(100),CUIRESPONSEATTRIBUTES VARCHAR(300),ADVANCEDCUIEXPRESSION VARCHAR(100));
COMMIT;

--ADD ACL for Search Session
Insert into TBLMACTION (ACTIONID,NAME,ALIAS,DESCRIPTION,ACTIONTYPEID,PARENTACTIONID,ACTIONLEVEL,SYSTEMGENERATED,SCREENID,STATUS,FREEZEPROFILE) 
values ('ACN00437','Search Session','SEARCH_SESSION','Search Session','ACT00','ACN00001',1,'N','SCR001','E','E');

Insert into TBLTSUBBISMODULEACTIONREL (ACTIONID,SUBBUSINESSMODULEID,STATUS) values ('ACN00437','SBM00101','E');

Insert into TBLMGROUPACTIONREL (ACTIONID,GROUPID) values ('ACN00437',1);
commit;

--Rename ID to CONCUSERID in TBLMDIAMETERSESSIONDATA
ALTER TABLE TBLMDIAMETERSESSIONDATA RENAME COLUMN ID TO CONCUSERID;
COMMIT;

--adding PROTOCOLTYPE column in TBLMDIAMETERSESSIONDATA and TBLMCONCURRENTUSERS
ALTER TABLE TBLMDIAMETERSESSIONDATA ADD (PROTOCOLTYPE varchar2(30));
ALTER TABLE TBLMCONCURRENTUSERS ADD (PROTOCOLTYPE varchar2(30));
COMMIT;

--Add viewablecolumns in diametersessionmanager
ALTER TABLE TBLMDIAMETERSESSIONMANAGER ADD VIEWABLECOLUMNS VARCHAR(300);
commit;

CREATE TABLE TBLMHAKEYS (
HAIPADDRESS VARCHAR2(30),
LIFETIME NUMBER(30),
SPI NUMBER(30),
GENERATIONTIME NUMBER(30),
KEY VARCHAR2(3000));

COMMIT;

--change status of detail local driver
update tblsdrivertype set status='N' where drivertypeid=5;
update tblsdrivertype set status='N' where drivertypeid=12;
commit;

-- DIAMETER POLICY TIME PERIOD
CREATE SEQUENCE SEQ_MDIAMETERPOLICYTIMEPERIOD
    INCREMENT BY 1
    START WITH 1
    NOMAXVALUE
    NOMINVALUE
    NOCYCLE
    CACHE 20
    NOORDER; 

CREATE TABLE TBLMDIAMETERPOLICYTIMEPERIOD (
  TIMEPERIODID            NUMERIC(12,0),
  MONTHOFYEAR             VARCHAR(100),
  DAYOFMONTH              VARCHAR(100),
  DAYOFWEEK               VARCHAR(100),
  TIMEPERIOD              VARCHAR(100),
  DIAMETERPOLICYID          NUMERIC(10),
  CONSTRAINT PK_MDIAMETERPOLICYTIMEPERIOD PRIMARY KEY (TIMEPERIODID),
  CONSTRAINT FK1_MDIAMETERPOLICYTIMEPERIOD FOREIGN KEY (DIAMETERPOLICYID) REFERENCES TBLMDIAMETERPOLICY(DIAMETERPOLICYID) 
);

COMMIT;

CREATE TABLE TBLMDHCPKEYS (
DHCPIPADDRESS VARCHAR2(30),
RKID NUMBER(10),
GENERATIONTIME NUMBER(20),
DHCPKEY VARCHAR2(3000));

COMMIT;